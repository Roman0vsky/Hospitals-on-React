{"ast":null,"code":"var _jsxFileName = \"D:\\\\Programs\\\\VS Code projects\\\\\\u0412\\u0435\\u0431-\\u043F\\u0440\\u043E\\u0433\\u0430\\\\hospitals-on-react\\\\client\\\\src\\\\pages\\\\Companies\\\\index.tsx\",\n  _s = $RefreshSig$();\nimport { Container, InfoContainer, Wrap } from \"./styled\";\nimport { AvatarImg, Button, Text, Title } from \"src/commonStyles\";\nimport DoctorCard from \"src/pages/Companies/DoctorCard/DoctorCard\";\nimport { Link, redirect, useNavigate, useParams } from \"react-router-dom\";\nimport CatalogService from \"src/utils/api/services/Catalog\";\nimport { getItem } from \"src/utils/local-storage\";\nimport { APP_ROUTES } from \"src/utils/constants\";\nimport jwt from \"jwt-decode\";\nimport UsersService from \"src/utils/api/services/Users\";\nimport store from \"src/store\";\nimport { setActivatedCatalog, setCompanies, setUser } from \"src/store/actions\";\nimport CompaniesService from \"src/utils/api/services/Companies\";\nimport { useSelector } from \"react-redux\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Doctors() {\n  _s();\n  const {\n    name\n  } = useParams();\n  const doctors = useSelector(store => store.doctors.data);\n  const activatedHospital = useSelector(store => store.hospital.activatedHospital);\n  const navigate = useNavigate();\n  function goToReviews() {\n    return navigate(`${APP_ROUTES.CATALOG}/${name}/reviews`);\n  }\n  const cards = doctors.map(card => /*#__PURE__*/_jsxDEV(Link, {\n    to: `${APP_ROUTES.CATALOG}/${name}/${card.id}`,\n    style: {\n      textDecoration: \"none\",\n      color: \"#000\"\n    },\n    children: /*#__PURE__*/_jsxDEV(DoctorCard, {\n      imgUrl: card.imgUrl,\n      fullName: card.fullName,\n      specialization: card.specialization\n    }, card.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this)\n  }, card.id, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 5\n  }, this));\n  return /*#__PURE__*/_jsxDEV(Wrap, {\n    children: [/*#__PURE__*/_jsxDEV(InfoContainer, {\n      children: [/*#__PURE__*/_jsxDEV(Title, {\n        children: \"Hospital information\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AvatarImg, {\n        $backgroundImg: (activatedHospital === null || activatedHospital === void 0 ? void 0 : activatedHospital.imgUrl) || \"\",\n        $margin_bottom: \"20px\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Text, {\n        children: activatedHospital === null || activatedHospital === void 0 ? void 0 : activatedHospital.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Text, {\n        children: activatedHospital === null || activatedHospital === void 0 ? void 0 : activatedHospital.address\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Text, {\n        children: activatedHospital === null || activatedHospital === void 0 ? void 0 : activatedHospital.workTime\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Text, {\n        children: activatedHospital === null || activatedHospital === void 0 ? void 0 : activatedHospital.phone\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Text, {\n        children: activatedHospital === null || activatedHospital === void 0 ? void 0 : activatedHospital.email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        $light: true,\n        $width: \"320px\",\n        $margin: \"20px 0 0\",\n        onClick: goToReviews,\n        children: \"Check reviews\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: cards\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), cards.length === 0 && /*#__PURE__*/_jsxDEV(Container, {\n      children: \"\\u041D\\u0435\\u0442 \\u0432\\u0440\\u0430\\u0447\\u0435\\u0439\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 30\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n}\n_s(Doctors, \"xm74+Y8M3DVTxh3fitgnlxwao+M=\", false, function () {\n  return [useParams, useSelector, useSelector, useNavigate];\n});\n_c = Doctors;\nexport const companiesLoader = async _ref => {\n  let {\n    params\n  } = _ref;\n  const token = getItem(\"token\");\n  if (!token) return redirect(APP_ROUTES.LOGIN);\n  const payload = jwt(token);\n  let [user, catalog] = await Promise.all([UsersService.getUser(+payload.sub), CatalogService.getCatalog({\n    name: params.name.split(\"-\").join(\" \")\n  })]);\n  if (!user.id) return null;\n  if (catalog.length === 0) return redirect(APP_ROUTES.CATALOG);\n  const companies = await CompaniesService.getCompanies({\n    hospitalId: catalog[0].id\n  });\n  store.dispatch(setUser(user));\n  store.dispatch(setActivatedCatalog(catalog[0]));\n  store.dispatch(setCompanies(companies));\n  return user;\n};\nvar _c;\n$RefreshReg$(_c, \"Doctors\");","map":{"version":3,"names":["Container","InfoContainer","Wrap","AvatarImg","Button","Text","Title","DoctorCard","Link","redirect","useNavigate","useParams","CatalogService","getItem","APP_ROUTES","jwt","UsersService","store","setActivatedCatalog","setCompanies","setUser","CompaniesService","useSelector","jsxDEV","_jsxDEV","Doctors","_s","name","doctors","data","activatedHospital","hospital","navigate","goToReviews","CATALOG","cards","map","card","to","id","style","textDecoration","color","children","imgUrl","fullName","specialization","fileName","_jsxFileName","lineNumber","columnNumber","$backgroundImg","$margin_bottom","address","workTime","phone","email","$light","$width","$margin","onClick","length","_c","companiesLoader","_ref","params","token","LOGIN","payload","user","catalog","Promise","all","getUser","sub","getCatalog","split","join","companies","getCompanies","hospitalId","dispatch","$RefreshReg$"],"sources":["D:/Programs/VS Code projects/Веб-прога/hospitals-on-react/client/src/pages/Companies/index.tsx"],"sourcesContent":["import { Container, InfoContainer, Wrap } from \"./styled\";\r\nimport { AvatarImg, Button, Text, Title } from \"src/commonStyles\";\r\nimport DoctorCard from \"src/pages/Companies/DoctorCard/DoctorCard\";\r\nimport { Link, redirect, useNavigate, useParams } from \"react-router-dom\";\r\nimport CatalogService from \"src/utils/api/services/Catalog\";\r\nimport { getItem } from \"src/utils/local-storage\";\r\nimport { APP_ROUTES } from \"src/utils/constants\";\r\nimport { JWTPayload } from \"src/utils/interfaces/jwt-payload.interface\";\r\nimport jwt from \"jwt-decode\";\r\nimport UsersService from \"src/utils/api/services/Users\";\r\nimport store from \"src/store\";\r\nimport { setActivatedCatalog, setCompanies, setUser } from \"src/store/actions\";\r\nimport CompaniesService from \"src/utils/api/services/Companies\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { IStore } from \"src/store/interfaces/store.interface\";\r\n\r\nexport default function Doctors() {\r\n  const { name } = useParams();\r\n  const doctors = useSelector((store: IStore) => store.doctors.data);\r\n  const activatedHospital = useSelector(\r\n    (store: IStore) => store.hospital.activatedHospital\r\n  );\r\n  const navigate = useNavigate();\r\n\r\n  function goToReviews() {\r\n    return navigate(`${APP_ROUTES.CATALOG}/${name}/reviews`);\r\n  }\r\n\r\n  const cards = doctors.map((card) => (\r\n    <Link\r\n      to={`${APP_ROUTES.CATALOG}/${name}/${card.id}`}\r\n      key={card.id}\r\n      style={{ textDecoration: \"none\", color: \"#000\" }}\r\n    >\r\n      <DoctorCard\r\n        key={card.id}\r\n        imgUrl={card.imgUrl}\r\n        fullName={card.fullName}\r\n        specialization={card.specialization}\r\n      />\r\n    </Link>\r\n  ));\r\n\r\n  return (\r\n    <Wrap>\r\n      <InfoContainer>\r\n        <Title>Hospital information</Title>\r\n        <AvatarImg\r\n          $backgroundImg={activatedHospital?.imgUrl || \"\"}\r\n          $margin_bottom=\"20px\"\r\n        />\r\n        <Text>{activatedHospital?.name}</Text>\r\n        <Text>{activatedHospital?.address}</Text>\r\n        <Text>{activatedHospital?.workTime}</Text>\r\n        <Text>{activatedHospital?.phone}</Text>\r\n        <Text>{activatedHospital?.email}</Text>\r\n        <Button $light $width=\"320px\" $margin=\"20px 0 0\" onClick={goToReviews}>\r\n          Check reviews\r\n        </Button>\r\n      </InfoContainer>\r\n      <Container>{cards}</Container>\r\n      {cards.length === 0 && <Container>Нет врачей</Container>}\r\n    </Wrap>\r\n  );\r\n}\r\n\r\nexport const companiesLoader = async ({ params }: any) => {\r\n  const token = getItem(\"token\");\r\n  if (!token) return redirect(APP_ROUTES.LOGIN);\r\n\r\n  const payload: JWTPayload = jwt(token);\r\n  let [user, catalog] = await Promise.all([\r\n    UsersService.getUser(+payload.sub),\r\n    CatalogService.getCatalog({ name: params.name.split(\"-\").join(\" \") }),\r\n  ]);\r\n  if (!user.id) return null;\r\n\r\n  if (catalog.length === 0) return redirect(APP_ROUTES.CATALOG);\r\n  const companies = await CompaniesService.getCompanies({\r\n    hospitalId: catalog[0].id,\r\n  });\r\n\r\n  store.dispatch(setUser(user));\r\n  store.dispatch(setActivatedCatalog(catalog[0]));\r\n  store.dispatch(setCompanies(companies));\r\n\r\n  return user;\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}